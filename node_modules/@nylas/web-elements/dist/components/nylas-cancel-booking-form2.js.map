{"file":"nylas-cancel-booking-form2.js","mappings":"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","names":[],"sources":["src/components/scheduler/nylas-cancel-booking-form/nylas-cancel-booking-form.scss?tag=nylas-cancel-booking-form&encapsulation=shadow","src/components/scheduler/nylas-cancel-booking-form/nylas-cancel-booking-form.tsx"],"sourcesContent":["@import '../../../common/styles/variables.scss';\n\n:host {\n  display: block;\n  width: 400px;\n  @include default-css-variables;\n}\n\nsp-theme {\n  height: inherit;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  font-family: var(--nylas-font-family);\n}\n\n.nylas-cancel-booking-form {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  background-color: var(--nylas-base-0);\n  color: var(--nylas-base-800);\n  border-radius: var(--nylas-border-radius-2x);\n  padding: 1.5rem;\n  position: relative;\n  box-shadow:\n    0px 1px 4px rgba(0, 0, 0, 0.1),\n    0px 3px 6px rgba(0, 0, 0, 0.06);\n}\n\n.nylas-cancel-booking-form__title {\n  font-size: 18px;\n  font-weight: 600;\n  margin-bottom: 0;\n  color: var(--nylas-base-900);\n}\n\n.nylas-cancel-booking-form__description {\n  font-size: 1rem;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 140%;\n  color: var(--nylas-base-600);\n}\n\n.nylas-cancel-booking-form__calendar-icon {\n  width: 3rem;\n  height: 3rem;\n  border-radius: 50%;\n  position: absolute;\n  top: -1.25rem;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: var(--nylas-base-0);\n  border: 1px solid var(--nylas-base-200);\n}\n\ncalendar-cancel-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n}\n\nsp-button {\n  background-color: var(--nylas-base-0);\n  color: var(--nylas-base-700);\n  border: 1px solid var(--nylas-base-200);\n  border-radius: var(--nylas-border-radius-2x);\n  font-size: 16px;\n  font-weight: 600;\n  width: 100%;\n  height: 48px;\n  padding: 8px;\n  line-height: 24px;\n  font-family: var(--nylas-font-family);\n  &.cancel {\n    margin-top: 1.25rem;\n    background-color: var(--nylas-primary);\n    color: var(--nylas-base-0);\n    &:hover,\n    &:focus {\n      background-color: var(--nylas-base-600);\n    }\n    &:active {\n      background-color: var(--nylas-base-800);\n    }\n  }\n  &.back {\n    margin-top: 0.5rem;\n    &:hover,\n    &:focus {\n      border-color: var(--nylas-primary);\n    }\n    &:active {\n      border-color: var(--nylas-base-600);\n    }\n  }\n}\n\nsp-field-label {\n  margin-top: 1rem;\n  display: flex;\n  color: var(--nylas-base-800);\n  font-size: 14px;\n  &.error {\n    color: var(--nylas-error);\n  }\n  span.required {\n    color: var(--nylas-error);\n  }\n}\nsp-textfield {\n  --spectrum-textfield-border-color: var(--nylas-base-300);\n  --spectrum-textfield-icon-color-invalid: var(--nylas-error);\n  position: relative;\n  width: 100%;\n  height: 48px;\n  margin-bottom: 16px;\n  background-color: var(--nylas-base-0);\n  color: var(--nylas-base-500);\n  &.error {\n    --spectrum-textfield-border-color: var(--nylas-error);\n  }\n}\n\nsp-help-text {\n  margin: 0.25rem 0 1rem 0;\n  color: var(--nylas-error);\n}\n","import { RegisterComponent } from '@/common/register-component';\nimport { Component, Event, EventEmitter, h, Host, Prop, State } from '@stencil/core';\nimport { NylasSchedulerConnector } from '../../..';\nimport { NylasScheduling } from '../nylas-scheduler/nylas-scheduling';\nimport { debug } from '@/utils/utils';\nimport { Notification, NylasSchedulerErrorResponse } from '@nylas/core';\n\n/**\n * The `nylas-cancel-booking-form` component is a UI component that allows users to cancel a booking.\n */\n@Component({\n  tag: 'nylas-cancel-booking-form',\n  styleUrl: 'nylas-cancel-booking-form.scss',\n  shadow: true,\n})\nexport class NylasCancelBookingForm {\n  /**\n   * The booking ID to cancel.\n   */\n  @Prop() readonly cancelBookingId!: string;\n\n  /**\n   * This event is fired when the Go back button is clicked on the cancel booking form.\n   */\n  @Event() readonly goBackButtonClicked!: EventEmitter<void>;\n\n  /**\n   * This event is fired when the cancel booking form is submitted.\n   */\n  @Event() readonly cancelBookingFormSubmitted!: EventEmitter<{ bookingId: string; reason: string; errorHandler?: (error: NylasSchedulerErrorResponse) => void }>;\n\n  /**\n   * This event is fired when an error occurs while cancelling the booking.\n   */\n  @Event() readonly cancelBookedEventError!: EventEmitter<NylasSchedulerErrorResponse>;\n\n  /**\n   * This event is fired when an error occurs in the booking form.\n   */\n  @Event() cancelBookingFormError!: EventEmitter<Partial<Notification>>;\n\n  /**\n   * The reason for cancellation.\n   */\n  @State() cancellationReason: string = '';\n\n  @State() cancellationError: string = '';\n\n  connectedCallback() {\n    debug(`[nylas-cancel-booking-form] Component connected`);\n  }\n\n  async componentWillLoad() {\n    debug(`[nylas-cancel-booking-form] Component will load`);\n  }\n\n  async componentDidLoad() {\n    debug(`[nylas-cancel-booking-form] Component did load`);\n  }\n\n  disconnectedCallback() {\n    debug(`[nylas-cancel-booking-form] Component disconnected`);\n  }\n\n  private handleGoBackClicked = () => {\n    this.goBackButtonClicked.emit();\n  };\n\n  private handleSubmitCancelBooking = (event: Event) => {\n    event.preventDefault();\n    if (!this.cancellationReason) {\n      this.cancellationError = 'Please provide a reason for cancellation.';\n      this.cancelBookingFormError.emit({ title: 'Cancel booking form error', description: 'Please provide a reason for cancellation.' });\n      return;\n    }\n\n    debug(`[nylas-cancel-booking-form] Cancel booking form submitted with reason: ${this.cancellationReason}`);\n    const errorHandler = (error: NylasSchedulerErrorResponse) => {\n      this.cancelBookedEventError.emit(error);\n    };\n    this.cancelBookingFormSubmitted.emit({ bookingId: this.cancelBookingId, reason: this.cancellationReason, errorHandler });\n  };\n\n  private handleOnChangeCancellationReason = (event: Event) => {\n    this.cancellationError = '';\n    this.cancellationReason = (event.target as HTMLInputElement).value;\n  };\n\n  @RegisterComponent<NylasCancelBookingForm, NylasSchedulerConnector, Exclude<NylasScheduling['stores'], undefined>>({\n    name: 'nylas-cancel-booking-form',\n    eventToProps: {\n      cancelBookingFormSubmitted: async (\n        event: CustomEvent<{ bookingId: string; reason: string; errorHandler?: (error: NylasSchedulerErrorResponse) => void }>,\n        nylasSchedulerConnector: NylasSchedulerConnector,\n      ) => {\n        const result = await nylasSchedulerConnector.scheduler.cancelBooking(event.detail.bookingId);\n        const { errorHandler } = event.detail;\n        if (errorHandler && (!result || 'error' in result)) {\n          errorHandler(result);\n        }\n      },\n    },\n    fireRegisterEvent: true,\n  })\n  render() {\n    return (\n      <Host part=\"ncec\">\n        <sp-theme theme=\"spectrum\" scale=\"medium\">\n          <div class=\"nylas-cancel-booking-form\" part=\"ncec__card\">\n            <div class=\"nylas-cancel-booking-form__calendar-icon\" part=\"ncec__icon\">\n              <calendar-cancel-icon />\n            </div>\n            <h3 class=\"nylas-cancel-booking-form__title\" part=\"ncec__title\">\n              Cancel booking?\n            </h3>\n            <div class=\"nylas-cancel-booking-form__description\" part=\"ncec__description\">\n              Your current timeslot will become available to others.\n            </div>\n            <form onSubmit={this.handleSubmitCancelBooking}>\n              <sp-field-label for=\"cancel-reason\" class={this.cancellationError ? 'error' : ''}>\n                Reason for cancellation <span class=\"required\">*</span>\n              </sp-field-label>\n              <sp-textfield\n                id=\"cancel-reason\"\n                class={this.cancellationError ? 'error' : ''}\n                part=\"ncec__reason-textarea\"\n                multiline\n                value={this.cancellationReason}\n                onInput={this.handleOnChangeCancellationReason}\n                onFocus={this.handleOnChangeCancellationReason}\n                invalid={!!this.cancellationError}\n              >\n                <sp-help-text slot=\"negative-help-text\">{this.cancellationError}</sp-help-text>\n              </sp-textfield>\n              <sp-button variant=\"primary\" class=\"cancel\" type=\"submit\" part=\"ncec__button-cta\">\n                Cancel booking\n              </sp-button>\n              <sp-button variant=\"secondary\" class=\"back\" treatment=\"outline\" part=\"ncec__button-outline\" onClick={this.handleGoBackClicked}>\n                Go back\n              </sp-button>\n            </form>\n          </div>\n        </sp-theme>\n      </Host>\n    );\n  }\n}\n"],"version":3}