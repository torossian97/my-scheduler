{"version":3,"names":["nylasAdditionalParticipantsCss","NylasAdditionalParticipantsStyle0","NylasAdditionalParticipants","this","eventParticipants","elementNameChangedHandler","newValue","debug","host","setAttribute","connectedCallback","componentWillLoad","name","componentDidLoad","internals","setFormValue","JSON","stringify","participants","disconnectedCallback","onParticipantChange","event","index","email","target","value","addParticipant","is_organizer","availability","calendar_ids","removeParticipant","filter","p","validate","regex","valid","test","String","toLowerCase","is_valid","render","h","Host","key","slot","class","part","map","participant","type","onInput","e","readOnly","onBlur","onClick","__decorate","RegisterComponent","eventToProps","fireRegisterEvent"],"sources":["src/components/scheduler-editor/nylas-additional-participants/nylas-additional-participants.scss?tag=nylas-additional-participants&encapsulation=shadow","src/components/scheduler-editor/nylas-additional-participants/nylas-additional-participants.tsx"],"sourcesContent":["@import '../../../common/styles/variables.scss';\n\n:host {\n  display: block;\n  margin: 1rem;\n  @include default-css-variables;\n}\n\n.nylas-additional-participants__title {\n  color: var(--nylas-base-nylas-base-900-aaa, #101323);\n  font-size: 16px;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 20px; /* 125% */\n  margin: 0;\n  text-align: left;\n}\n.nylas-additional-participants__subtitle {\n  color: var(--nylas-base-600);\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 20px; /* 142.857% */\n  margin: 0.25rem 0px 0px;\n  text-align: left;\n}\n.nylas-additional-participants__content {\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.nylas-additional-participants__input_group {\n  padding-top: 8px;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  label {\n    display: flex;\n    align-items: center;\n    color: var(--nylas-base-800);\n    font-size: 14px;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 150%;\n  }\n}\n.nylas-additional-participants__input_wrapper {\n  display: flex;\n  border-width: 1;\n  border-radius: 8px;\n  border: 1px solid var(--nylas-base-300);\n  button {\n    padding: 12px;\n    border: none;\n    background: none;\n    cursor: pointer;\n    &:hover,\n    &:active {\n      color: var(--nylas-primary);\n    }\n  }\n}\n.nylas-additional-participants__input_wrapper_organizer {\n  background: var(--nylas-base-50);\n}\n\n.nylas-additional-participants__input {\n  flex: 1;\n  padding: 12px 16px;\n  border-right: 1px solid var(--nylas-base-300);\n  input {\n    border: none;\n    outline: none;\n    background: none;\n    width: 100%;\n  }\n}\n\n.nylas-additional-participants__add {\n  padding: 12px;\n  display: flex;\n  align-items: center;\n  border: none;\n  background: none;\n  cursor: pointer;\n  span {\n    padding: 0 8px;\n    font-size: 16px;\n    font-style: normal;\n    font-weight: 500;\n  }\n  &:hover,\n  &:active {\n    color: var(--nylas-primary);\n  }\n}\n","import { RegisterComponent } from '@/common/register-component';\nimport { NylasSchedulerConfigConnector } from '@/connector/nylas-scheduler-config-connector';\nimport { debug } from '@/utils/utils';\nimport { AttachInternals, Component, Host, Prop, State, Watch, h, Element } from '@stencil/core';\nimport { NylasSchedulerEditor } from '../nylas-scheduler-editor/nylas-scheduler-editor';\n\ntype Participant = {\n  name?: string;\n  email: string;\n  is_valid?: boolean;\n  is_organizer: boolean;\n  availability?: Availability;\n  booking?: Booking;\n};\ntype Availability = {\n  calendar_ids: string[];\n};\ntype Booking = {\n  calendar_id: string;\n};\n\n/**\n * The `nylas-additional-participants` component is a form input for adding additional participants to an event.\n * @part nap__title - The title of the component.\n * @part nap__subtitle - The subtitle of the component.\n * @part nap__content - The content of the component.\n * @part nap__input_group - The input group of the component.\n * @part nap__input_wrapper - The input wrapper of the component.\n * @part nap__input - The input of the component.\n * @part nap__remove-participant - The remove participant button of the component.\n * @part nap__add-participant - The add participant button of the component.\n *\n */\n@Component({\n  tag: 'nylas-additional-participants',\n  styleUrl: 'nylas-additional-participants.scss',\n  shadow: true,\n  formAssociated: true,\n})\nexport class NylasAdditionalParticipants {\n  @Element() host!: HTMLNylasAdditionalParticipantsElement;\n  @Prop() name: string = 'participants';\n  @Prop() eventParticipants?: Participant[];\n  @AttachInternals() internals!: ElementInternals;\n\n  /**\n   * When a name prop is passed, stencil does not automatically set the name attribute on the host element.\n   * Since this component is form-associated, the name attribute is required for form submission.\n   * This is a workaround to ensure that the name attribute is set on the host element.\n   */\n  @Watch('name')\n  elementNameChangedHandler(newValue: string) {\n    debug('nylas-additional-participants', 'elementNameChangedHandler', newValue);\n    this.host.setAttribute('name', newValue);\n  }\n\n  @State() participants: Participant[] = this.eventParticipants ?? [];\n  @State() participantsValid: boolean = true;\n  connectedCallback() {\n    debug('nylas-additional-participants', 'connectedCallback');\n  }\n\n  componentWillLoad() {\n    debug('nylas-additional-participants', 'componentWillLoad');\n    this.host.setAttribute('name', this.name);\n  }\n\n  componentDidLoad() {\n    debug('nylas-additional-participants', 'componentDidLoad');\n    this.internals.setFormValue(JSON.stringify(this.participants), 'participants');\n  }\n\n  disconnectedCallback() {\n    debug('nylas-additional-participants', 'disconnectedCallback');\n  }\n  onParticipantChange(event, index) {\n    debug('nylas-additional-participants', 'onParticipantChange');\n    this.participants[index].email = event.target.value;\n    this.internals.setFormValue(JSON.stringify(this.participants), 'participants');\n  }\n  addParticipant() {\n    debug('nylas-additional-participants', 'addParticipant');\n    this.participants = [...this.participants, { email: '', is_organizer: false, availability: { calendar_ids: ['primary'] } }];\n    this.internals.setFormValue(JSON.stringify(this.participants), 'participants');\n  }\n  removeParticipant(email: string) {\n    debug('nylas-additional-participants', 'addParticipant');\n    this.participants = this.participants.filter(p => p.email !== email);\n    this.internals.setFormValue(JSON.stringify(this.participants), 'participants');\n  }\n  validate(email, index) {\n    debug('nylas-additional-participants', 'validate');\n    const regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    const valid = regex.test(String(email).toLowerCase());\n    this.participants[index].is_valid = valid;\n    this.internals.setFormValue(JSON.stringify(this.participants), 'participants');\n  }\n\n  @RegisterComponent<NylasAdditionalParticipants, NylasSchedulerConfigConnector, Exclude<NylasSchedulerEditor['stores'], undefined>>({\n    name: 'nylas-additional-participants',\n    eventToProps: {},\n    fireRegisterEvent: true,\n  })\n  render() {\n    return (\n      <Host>\n        <nylas-form-card>\n          <h3 slot=\"header-title\" class=\"nylas-additional-participants__title\" part=\"nap__title\">\n            Additional participants\n          </h3>\n          <p slot=\"header-subtitle\" class=\"nylas-additional-participants__subtitle\" part=\"nap__subtitle\">\n            Add anyone else who would be joining for this event.\n          </p>\n          <div slot=\"content\" class=\"nylas-additional-participants__content\">\n            <div>\n              {this.participants.map((participant, index) => {\n                return (\n                  <div class={'nylas-additional-participants__input_group'} part=\"nap__input_group\">\n                    <label>{participant.is_organizer ? 'Organizer' : `Participant ${index}`}</label>\n                    <div\n                      part=\"nap__input_wrapper\"\n                      class={`nylas-additional-participants__input_wrapper ${participant.is_organizer && 'nylas-additional-participants__input_wrapper_organizer'} ${participant.is_valid === false && 'nylas-additional-participants__input_wrapper_invalid'}`}\n                    >\n                      <div class=\"nylas-additional-participants__input\" part=\"nap__input\">\n                        <input\n                          type=\"text\"\n                          value={participant.email}\n                          onInput={e => {\n                            this.onParticipantChange(e, index);\n                          }}\n                          readOnly={participant.is_organizer}\n                          onBlur={() => this.validate(participant.email, index)}\n                        />\n                      </div>\n                      {!participant.is_organizer && (\n                        <button onClick={() => this.removeParticipant(participant.email)} part=\"nap__remove-participant\">\n                          <close-icon />\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n            {/* <button class=\"nylas-additional-participants__add\"  part=\"nap__add-participant\" onClick={() => this.addParticipant()}>\n              <add-circle-icon /> <span>Add a participant</span>\n            </button> */}\n          </div>\n        </nylas-form-card>\n      </Host>\n    );\n  }\n}\n"],"mappings":"yJAAA,MAAMA,EAAiC,i1EACvC,MAAAC,EAAeD,E,ugBCsCFE,EAA2B,M,mMAEf,e,mDAegBC,KAAKC,mBAAqB,G,uBAC3B,I,CANtC,yBAAAC,CAA0BC,GACxBC,EAAM,gCAAiC,4BAA6BD,GACpEH,KAAKK,KAAKC,aAAa,OAAQH,E,CAKjC,iBAAAI,GACEH,EAAM,gCAAiC,oB,CAGzC,iBAAAI,GACEJ,EAAM,gCAAiC,qBACvCJ,KAAKK,KAAKC,aAAa,OAAQN,KAAKS,K,CAGtC,gBAAAC,GACEN,EAAM,gCAAiC,oBACvCJ,KAAKW,UAAUC,aAAaC,KAAKC,UAAUd,KAAKe,cAAe,e,CAGjE,oBAAAC,GACEZ,EAAM,gCAAiC,uB,CAEzC,mBAAAa,CAAoBC,EAAOC,GACzBf,EAAM,gCAAiC,uBACvCJ,KAAKe,aAAaI,GAAOC,MAAQF,EAAMG,OAAOC,MAC9CtB,KAAKW,UAAUC,aAAaC,KAAKC,UAAUd,KAAKe,cAAe,e,CAEjE,cAAAQ,GACEnB,EAAM,gCAAiC,kBACvCJ,KAAKe,aAAe,IAAIf,KAAKe,aAAc,CAAEK,MAAO,GAAII,aAAc,MAAOC,aAAc,CAAEC,aAAc,CAAC,cAC5G1B,KAAKW,UAAUC,aAAaC,KAAKC,UAAUd,KAAKe,cAAe,e,CAEjE,iBAAAY,CAAkBP,GAChBhB,EAAM,gCAAiC,kBACvCJ,KAAKe,aAAef,KAAKe,aAAaa,QAAOC,GAAKA,EAAET,QAAUA,IAC9DpB,KAAKW,UAAUC,aAAaC,KAAKC,UAAUd,KAAKe,cAAe,e,CAEjE,QAAAe,CAASV,EAAOD,GACdf,EAAM,gCAAiC,YACvC,MAAM2B,EAAQ,yJACd,MAAMC,EAAQD,EAAME,KAAKC,OAAOd,GAAOe,eACvCnC,KAAKe,aAAaI,GAAOiB,SAAWJ,EACpChC,KAAKW,UAAUC,aAAaC,KAAKC,UAAUd,KAAKe,cAAe,e,CAQjE,MAAAsB,GACE,OACEC,EAACC,EAAI,CAAAC,IAAA,4CACHF,EAAA,mBAAAE,IAAA,4CACEF,EAAA,MAAAE,IAAA,2CAAIC,KAAK,eAAeC,MAAM,uCAAuCC,KAAK,cAAY,2BAGtFL,EAAA,KAAAE,IAAA,2CAAGC,KAAK,kBAAkBC,MAAM,0CAA0CC,KAAK,iBAAe,wDAG9FL,EAAA,OAAAE,IAAA,2CAAKC,KAAK,UAAUC,MAAM,0CACxBJ,EAAA,OAAAE,IAAA,4CACGxC,KAAKe,aAAa6B,KAAI,CAACC,EAAa1B,IAEjCmB,EAAA,OAAKI,MAAO,6CAA8CC,KAAK,oBAC7DL,EAAA,aAAQO,EAAYrB,aAAe,YAAc,eAAeL,KAChEmB,EAAA,OACEK,KAAK,qBACLD,MAAO,gDAAgDG,EAAYrB,cAAgB,4DAA4DqB,EAAYT,WAAa,OAAS,0DAEjLE,EAAA,OAAKI,MAAM,uCAAuCC,KAAK,cACrDL,EAAA,SACEQ,KAAK,OACLxB,MAAOuB,EAAYzB,MACnB2B,QAASC,IACPhD,KAAKiB,oBAAoB+B,EAAG7B,EAAM,EAEpC8B,SAAUJ,EAAYrB,aACtB0B,OAAQ,IAAMlD,KAAK8B,SAASe,EAAYzB,MAAOD,OAGjD0B,EAAYrB,cACZc,EAAA,UAAQa,QAAS,IAAMnD,KAAK2B,kBAAkBkB,EAAYzB,OAAQuB,KAAK,2BACrEL,EAAA,2B,sIAjCxBc,EAAA,CALCC,EAAkI,CACjI5C,KAAM,gCACN6C,aAAc,GACdC,kBAAmB,O"}