{"version":3,"names":["nylasLoginCss","NylasLoginStyle0","NylasLogin","this","_handleLoginRedirect","async","url","nylasConnector","auth","getHostedAuthRedirectURL","scopes","event","buttonClick","emit","defaultPrevented","window","location","href","_onGoogleButtonClick","preventDefault","undefined","_onMicrosoftButtonClick","_onFormSubmit","email","connectedCallback","disconnectedCallback","componentWillLoad","componentDidLoad","exchangedToken","manageHostedAuthCodeExchange","history","replaceState","document","title","pathname","render","splitProviders","providers","split","h","Host","key","loginMethod","class","isAuthenticated","part","onClick","buttonText","src","logoUrl","alt","companyName","width","style","minWidth","logoWidth","includes","xmlns","role","height","preserveAspectRatio","viewBox","fill","d","method","onSubmit","htmlFor","type","id","name","required","value","__decorate","RegisterComponent","connectorToProp","stateToProps","Map","fireRegisterEvent"],"sources":["src/components/nylas-login/nylas-login.css?tag=nylas-login&encapsulation=shadow","src/components/nylas-login/nylas-login.tsx"],"sourcesContent":[":host {\n  font-family: 'Arial', sans-serif;\n  background: var(--nylas-color-primary-50); /* Closest to #f0f0f0 */\n  color: var(--nylas-color-primary-800); /* Closest to #333 */\n  margin: 0;\n  display: contents;\n}\n\ninput {\n  box-sizing: border-box;\n}\n\n.login-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n\n.login-box {\n  width: 300px;\n  padding: 20px;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n  border-radius: var(--nylas-border-radius-2x);\n  background: var(--nylas-color-primary-50); /* Assuming white background */\n  text-align: center;\n}\n\n.login-box h1 {\n  margin-top: 0;\n  margin-bottom: 0.5em;\n}\n\n.login-box p {\n  margin-bottom: 1em;\n}\n\n.login-methods button {\n  display: block;\n  width: 100%;\n  padding: 10px 10px 10px 50px;\n  margin-bottom: 10px;\n  border: none;\n  border-radius: var(--nylas-border-radius);\n  border: 1px solid var(--nylas-color-primary-300); /* Closest to #b1b1b1 */\n  background: var(--nylas-color-primary-100); /* Closest to #f1f1f1 */\n  color: var(--nylas-color-primary-600); /* Closest to #5f6368 */\n  cursor: pointer;\n  transition: background 0.3s ease;\n  position: relative;\n  text-align: left;\n}\n\n.login-methods button svg {\n  position: absolute;\n  left: 16px;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.login-methods button:hover {\n  background: var(--nylas-color-primary-200); /* Closest to #e2e2e2 */\n}\n\n.login-form label {\n  display: block;\n  margin-bottom: 5px;\n  text-align: left;\n}\n\n.login-form input {\n  width: 100%;\n  padding: 10px;\n  margin-bottom: 10px;\n  border: 1px solid var(--nylas-color-primary-200); /* Closest to #ddd */\n  border-radius: var(--nylas-border-radius);\n  background: var(--nylas-color-primary-100); /* Closest to #f1f1f1 */\n  color: var(--nylas-color-primary-800); /* Closest to #333 */\n}\n\n.login-form button {\n  width: 100%;\n  padding: 10px;\n  border: none;\n  border-radius: var(--nylas-border-radius);\n  background: var(--nylas-color-primary-500); /* Closest to #007bff */\n  color: var(--nylas-color-primary-50); /* Assuming white text */\n  cursor: pointer;\n  transition: background 0.3s ease;\n}\n\n.login-form button:hover {\n  background: var(--nylas-color-primary-600); /* Closest to #0056b3 */\n}\n","import { RegisterComponent } from '@/common/register-component';\nimport { NylasAuthConnectorInterface } from '@/connector/connector-interface';\nimport { Component, Event, EventEmitter, Host, Prop, State, h } from '@stencil/core';\nimport { ObservableMap } from '@stencil/store';\nimport { NylasAuthStoreState } from '../../components';\n\n@Component({\n  tag: 'nylas-login',\n  styleUrl: 'nylas-login.css',\n  shadow: true,\n})\nexport class NylasLogin {\n  @Prop() readonly isAuthenticated: boolean = false;\n  @Prop() readonly nylasConnector?: NylasAuthConnectorInterface;\n  @Prop() readonly scopes?: string[];\n  @Prop() readonly loginMethod: 'redirect' | 'emebded' = 'redirect';\n  @Prop() readonly companyName: string = 'Nylas';\n  @Prop() readonly logoUrl: string = 'https://www.nylas.com/wp-content/uploads/main-logo.svg';\n  @Prop() readonly logoWidth?: string = 'min-content';\n  @Prop() readonly providers?: string = 'google,microsoft';\n  @Prop() readonly buttonText: string = 'Login';\n\n  @Event() buttonClick!: EventEmitter<{ url?: string }>;\n\n  @State() email: string = '';\n\n  connectedCallback() {}\n\n  disconnectedCallback() {}\n\n  componentWillLoad() {}\n\n  async componentDidLoad() {\n    const exchangedToken = await this.nylasConnector?.auth.manageHostedAuthCodeExchange(window.location.href);\n    if (exchangedToken) {\n      // Remove the code query param from the user's browser url\n      window.history.replaceState({}, document.title, window.location.pathname);\n    }\n  }\n\n  private _handleLoginRedirect = async () => {\n    const url = await this.nylasConnector?.auth.getHostedAuthRedirectURL(this.scopes);\n\n    const event = this.buttonClick.emit({ url });\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    if (url) {\n      window.location.href = url;\n    }\n  };\n\n  private _onGoogleButtonClick = async (event: Event) => {\n    // Prevent the form from submitting\n    event.preventDefault();\n\n    const url = await this.nylasConnector?.auth.getHostedAuthRedirectURL(this.scopes, undefined, 'google');\n    if (url) {\n      window.location.href = url;\n    }\n  };\n\n  private _onMicrosoftButtonClick = async (event: Event) => {\n    // Prevent the form from submitting\n    event.preventDefault();\n\n    const url = await this.nylasConnector?.auth.getHostedAuthRedirectURL(this.scopes, undefined, 'microsoft');\n    if (url) {\n      window.location.href = url;\n    }\n  };\n\n  private _onFormSubmit = async (event: Event) => {\n    // Prevent the form from submitting\n    event.preventDefault();\n\n    const url = await this.nylasConnector?.auth.getHostedAuthRedirectURL(this.scopes, this.email);\n    if (url) {\n      window.location.href = url;\n    }\n  };\n\n  @RegisterComponent<\n    NylasLogin,\n    NylasAuthConnectorInterface,\n    {\n      auth: ObservableMap<NylasAuthStoreState>;\n    }\n  >({\n    name: 'nylas-login',\n    connectorToProp: 'nylasConnector',\n    stateToProps: new Map([['auth.isAuthenticated', 'isAuthenticated']]),\n    fireRegisterEvent: true,\n  })\n  render() {\n    const splitProviders = this.providers?.split(',') || [];\n    return (\n      <Host>\n        {this.loginMethod === 'redirect' && (\n          <div class=\"redirect-container\">\n            {!this.isAuthenticated && (\n              <sp-button part=\"button\" onClick={this._handleLoginRedirect}>\n                {this.buttonText}\n              </sp-button>\n            )}\n          </div>\n        )}\n        {this.loginMethod === 'emebded' && (\n          <main class=\"login-container\">\n            <section class=\"login-box\">\n              <header>\n                <img\n                  src={this.logoUrl}\n                  alt={`${this.companyName} logo`}\n                  width={'100%'}\n                  style={{\n                    minWidth: this.logoWidth,\n                  }}\n                />\n                <h1>Welcome</h1>\n              </header>\n              <p>Log in to your account to continue to {this.companyName}</p>\n              <div class=\"login-methods\">\n                {splitProviders.includes('google') && (\n                  <button class=\"login-google\" onClick={this._onGoogleButtonClick}>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" role=\"img\" width=\"18\" height=\"18\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 256 262\">\n                      <path fill=\"#4285F4\" d=\"M255.6 131.6c0-8.2-.8-16.2-2.2-23.9H130v45.3h70.3c-3 16.1-12.4 29.7-26.3 38.9v32.4h42.6c25-23 39.4-56.7 39.4-97.7z\" />\n                      <path\n                        fill=\"#34A853\"\n                        d=\"M130 262c35.3 0 64.9-11.7 86.5-31.7l-42.6-32.4c-11.7 7.9-26.7 12.6-43.9 12.6-33.7 0-62.3-22.7-72.5-53.4H14.5v33.3A130.3 130.3 0 00130 262z\"\n                      />\n                      <path fill=\"#FBBC05\" d=\"M57.5 158.1a72.7 72.7 0 010-54.2V70.6H14.5a130.4 130.4 0 000 120.8l43-33.3z\" />\n                      <path fill=\"#EA4335\" d=\"M130 51.6c19 0 36 6.5 49.4 19.2l37-36C195 13.1 165.2 0 130 0A130.3 130.3 0 0014.5 70.6l43 33.3c10.2-30.7 38.8-53.3 72.5-53.3z\" />\n                    </svg>\n                    Continue with Google\n                  </button>\n                )}\n                {splitProviders.includes('microsoft') && (\n                  <button class=\"login-microsoft\" onClick={this._onMicrosoftButtonClick}>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" role=\"img\" width=\"18\" height=\"18\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 448 512\">\n                      <path fill=\"#F3F3F3\" d=\"M0 32v192h192V32H0zm256 0v192h192V32H256zm192 256v192h-192V288h192zM0 224v192h192V224H0z\" />\n                    </svg>\n                    Continue with Microsoft\n                  </button>\n                )}\n                {/* <button class=\"login-all\">View all providers</button> */}\n              </div>\n              <form class=\"login-form\" method=\"POST\" onSubmit={this._onFormSubmit}>\n                <label htmlFor=\"email\">Email</label>\n                <input type=\"email\" id=\"email\" name=\"email\" required value={this.email} />\n                <button type=\"submit\">Next</button>\n              </form>\n            </section>\n          </main>\n        )}\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}