import{r as e,h as t,c as n,H as o,a as i,F as r}from"./p-68c2fadf.js";import{a as s,k as a,l,m as c,p as f}from"./p-01e86103.js";import{R as u}from"./p-8b53becf.js";import{c as d}from"./p-cb65c223.js";const m=".sc-forward-icon-h{display:flex}";const p=m;const h=class{constructor(t){e(this,t);this.width="15";this.height="15"}render(){return t("svg",{key:"c3c406f225989a53006d7deef67a2dd8dd3d5d81",fill:"auto",width:this.width,height:this.height,viewBox:"0 0 1920 1920",xmlns:"http://www.w3.org/2000/svg"},t("path",{key:"be9eae8233d00a07dd1501d7daf45f51d6049908",d:"m1246.246 64-90.496 90.496 477.952 477.952h-590.848C467.878 632.448.038 1100.416.038 1675.392v109.056h128v-109.056c0-504.576 410.368-914.944 914.816-914.944h590.848l-477.952 478.08 90.496 90.496 632.448-632.576L1246.246 64Z","fill-rule":"evenodd"}))}};h.style=p;const y=':host{display:grid;color:var(--nylas-color-primary-900)}.editor{position:relative;display:block;max-height:300px;overflow:auto;padding:1rem;border:1px solid var(--nylas-color-primary-300)}.editor blockquote{visibility:hidden;overflow:hidden;position:relative;transition:height 0.3s ease;margin:0}.editor blockquote::before{content:"...";visibility:visible;opacity:1;position:absolute;top:0;left:0;background-color:var(--nylas-color-primary-300);width:20px;text-align:center;color:var(--nylas-color-primary-800);vertical-align:middle;display:flex;justify-content:center;align-items:center;align-self:center;cursor:pointer}.editor .collapsed{height:20px}.editor .expanded{visibility:visible;opacity:1;height:auto;margin:0px 0px 0px 0.8ex;border-left:1px solid var(--nylas-color-primary-300);padding-left:1rem}.editor .expanded::before{display:none;}.buttons{display:flex;margin-top:1rem;justify-content:space-between}.buttons sp-button{border-radius:var(--nylas-border-radius);background-color:var(--nylas-color-primary-400);color:var(--nylas-color-primary-900);fill:var(--nylas-color-primary-900)}.buttons sp-button:hover{background-color:var(--nylas-color-primary-500)}.buttons sp-button:disabled{background-color:var(--nylas-color-primary-200);color:var(--nylas-color-primary-600);cursor:not-allowed}.buttons sp-button chevron-icon{display:inline-block}.buttons .close{justify-self:end}.toolbar{position:absolute;display:none;background-color:var(--nylas-color-primary-200);border-radius:var(--nylas-border-radius);z-index:1}.toolbar sp-button{border:0}';const g=y;const b=class{constructor(t){e(this,t);this.close=n(this,"close",7);this.send=n(this,"send",7);this.closeComposer=e=>{this.close.emit(e)};this.sendComposer=e=>{if(!this.editorEl){s("no editor element");return}const t=this.editorEl.querySelector(".message-body");if(!t){s("no message body");return}if(this.message){this.send.emit({message:this.message,replyBody:t.querySelector(".message-body")?.innerHTML||""});this.close.emit(e);this.editorEl.innerHTML=""}};this.message=undefined;this.viewEmailElement=undefined}connectedCallback(){}disconnectedCallback(){if(this.editorEl){this.editorEl.innerHTML=""}}componentWillLoad(){}async componentDidLoad(){if(this.message){this.watchBody(this.message)}if(!this.editorEl){s("[connectedCallback] no editor element");return}if(!this.toolbarEl){s("[connectedCallback] no toolbar element");return}const e=this.editorEl;const t=this.toolbarEl;e.addEventListener("mouseup",(n=>{const o=this.host.shadowRoot?.getSelection();if(!o){s("no selection");return}const i=o.getRangeAt(0);const r=o.toString();if(!r){t.style.display="none";return}const a=e.querySelector(".message-body");if(!a){s("no message body");return}const l=i.commonAncestorContainer;const c=l.parentElement;if(!c){return}const f=a.getBoundingClientRect();s("messageBodyRect",{messageBodyRect:f});const u=c.getBoundingClientRect();s("foundRect",{foundRect:u});const d=c.childNodes[0];const m=d.textContent||"";const p=m.indexOf(r);const h=window.getComputedStyle(c).fontSize;const y=parseInt(h.replace("px",""),10);const g=u.top-f.top-t.clientHeight;const b=p*(1/y)*100;t.style.top=`${g}px`;t.style.left=`${b}px`;t.style.display="block"}))}watchBody(e){if(!this.editorEl){s("no editor element");return}this.editorEl.querySelectorAll(".message-body").forEach((e=>e.remove()));const t=document.createElement("div");t.classList.add("message-body");const n=document.createElement("p");n.innerHTML="&nbsp;";t.appendChild(n);const o=document.createElement("br");t.appendChild(o);const i=document.createElement("div");i.classList.add("reply-text");i.innerText=`On ${new Date(e.date*1e3).toLocaleDateString(undefined,{dateStyle:"full"})} <${e.from?.map((e=>e.name||e.email)).join(", ")}> wrote:`;t.appendChild(i);if(e.body){const n=document.createElement("html");n.innerHTML=e.body;const o=document.createElement("blockquote");o.classList.add("collapsed");o.classList.add("gmail_quote");o.innerHTML=n.innerHTML;t.appendChild(o);s("replyContainer",{replyContainer:o})}this.editorEl.appendChild(t);this.editorEl.querySelectorAll("blockquote.collapsed").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=e.target;t.classList.remove("collapsed");t.classList.add("expanded")}),{once:true})}));this.editorEl.focus()}render(){return t(o,{key:"8d7f9c145099757c2a8dc48f1d2a223831f82cda"},t("sp-theme",{key:"e92e457e86701838f55d97b3f2c1c0f70f14bf59",scale:"medium",color:"dark"},t("div",{key:"50eba2b6ee0c84d8eeb392385872604b74b11025",class:"editor",contentEditable:true,ref:e=>this.editorEl=e},t("div",{key:"38bdd2ec58e62699e2c604b1b2c586cb5ecf105a",class:"toolbar",ref:e=>this.toolbarEl=e,contentEditable:false},t("sp-button",{key:"6415e5f9910a2d9798e7c85162329f359e500aeb",quiet:true,onClick:()=>document.execCommand("bold")},t("div",{key:"e03cfe0f5736836f64aa350165fa519508e212f7",slot:"icon"},t("bold-icon",{key:"1ad03230cff2f0843d6da22153716c3818ed04f7"})),t("div",{key:"d90c50aff88b9ac7774d6792b91ea3ced21f4419",slot:"label"},"Bold")),t("sp-button",{key:"466621fcdf2e8e1e85b613bba82b948ed2177a88",quiet:true,onClick:()=>document.execCommand("underline")},t("div",{key:"6be0737cf685b02f3ee8ef7c34fd18674793af00",slot:"icon"},t("underline-icon",{key:"278b1b79d3aec25ab2c2181c3e5c631063b04e29"})),t("div",{key:"169d3039815082e208eb476b4490181f7eb54ee6",slot:"label"},"Underline")),t("sp-button",{key:"92c20b2d03b709f08c63af3a1e88b10e407243d7",quiet:true,onClick:()=>document.execCommand("italic")},t("div",{key:"67eb3d5b5a2118d90bfb81c7b51d52c41b5ab2a2",slot:"icon"},t("italic-icon",{key:"35ac96f9ff3f3f0c38c7e486092f42dc9451eb63"})),t("div",{key:"f29fe84363cca6e178a3651a1c8e56929ebb3e32",slot:"label"},"Italic")))),t("div",{key:"3d89b191642ab291fc338ffd66be16fe999950b1",class:"buttons"},t("sp-button",{key:"f78c122acf4c69c788d411d2dcfd49649c99919e",onClick:this.sendComposer,class:"send"},"Send"),t("sp-button",{key:"b46873c911cb796e9af22eb7d19bf6e1cd2cd1be",onClick:this.closeComposer,class:"close"},"Close"))))}get host(){return i(this)}static get watchers(){return{message:["watchBody"]}}};b.style=g;const w=":host{display:block}sp-button{padding:0;border:0;border-radius:var(--nylas-border-radius);min-block-size:50%;min-inline-size:2rem;background-color:var(--nylas-color-primary-300);fill:var(--nylas-color-primary-800)}sp-button:hover{background-color:var(--nylas-color-primary-400)}.summarize-button.stopped{animation:none}.summarize-button.playing{animation:pulse 2s infinite}.summarize-button.loading{display:flex;align-content:center;height:1.5rem;width:2rem;vertical-align:middle;animation:pulse 2s infinite;flex-wrap:wrap}.summarize-button.loading loading-icon{--dot-color:var(--nylas-color-primary-600)}@keyframes pulse{0%{transform:scale(1);box-shadow:0 0 0 0 var(--nylas-color-primary-300)}70%{transform:scale(1.05);box-shadow:0 0 0 10px rgba(255, 69, 0, 0)}100%{transform:scale(1);box-shadow:0 0 0 0 rgba(255, 69, 0, 0)}}@keyframes wave{0%{transform:translateX(0)}50%{transform:translateX(100%)}100%{transform:translateX(0)}}";const v=w;var k=undefined&&undefined.__decorate||function(e,t,n,o){var i=arguments.length,r=i<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,n):o,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)if(s=e[a])r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r;return i>3&&r&&Object.defineProperty(t,n,r),r};var x=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};const T=class{constructor(t){e(this,t);this.summarize=n(this,"summarize",7);this.abortController=new AbortController;this.onClick=async e=>{e.preventDefault();e.stopPropagation();if(this.state==="stopped"){if(this.message){this.abortController=new AbortController;const e=this.summarize.emit({abortController:this.abortController,playAudio:this.playAudio,message:this.message,updateState:this.updateState});if(!e.defaultPrevented){s(`[nylas-summarize-message-button] Default event not prevented, summarizing message`);if(this.audioRef){await this.audioRef.play().then((()=>this.audioRef?.pause())).catch((e=>console.error("Error playing audio:",e)));await this.audioRef.play().catch((e=>console.error("Error playing audio:",e)))}}}}else if(this.state==="playing"){this.abortController?.abort();this.audioRef?.pause()}else{this.state="stopped"}};this.message=undefined;this.state="stopped";this.playAudio=this.playAudio.bind(this);this.updateState=this.updateState.bind(this)}connectedCallback(){}disconnectedCallback(){}async componentWillLoad(){s(`[nylas-summarize-message-button] Component will load`)}async componentDidLoad(){s(`[nylas-summarize-message-button] Component did load`)}async updateState(e){this.state=e}async playAudio(e){if(!this.audioRef){this.state="stopped";return}if(!e){this.state="stopped";return}const t=this.audioRef;if(!("MediaSource"in window)){const n=await e;if(n==null){throw new Error("ReadableStream not yet supported in this browser.")}const o=n.getReader();const i=[];await this.readChunk(o,i);const r=new Blob(i,{type:"audio/mpeg"});const s=URL.createObjectURL(r);t.src=s;return}const n=new MediaSource;let o;let i=false;t.src=URL.createObjectURL(n);n.addEventListener("sourceopen",r);async function r(){o=n.addSourceBuffer("audio/mpeg");o.addEventListener("updateend",a);const r=await e;if(r==null){throw new Error("ReadableStream not yet supported in this browser.")}const s=r.getReader();const l=()=>{s.read().then((({done:e,value:t})=>{if(e){i=true;return}if(!o.updating){o.appendBuffer(t)}l()})).catch((e=>{console.error("Error while fetching and appending chunks:",e)}))};l();if(t.paused){t.play().catch((e=>console.error("Error playing audio:",e)))}}function a(){if(i){n.endOfStream();n.removeEventListener("sourceopen",r);n.removeEventListener("sourceclose",(()=>{s(`[nylas-summarize-message-button] Source closed`)}));o.removeEventListener("updateend",a);return}}}async readChunk(e,t){return e.read().then((({done:n,value:o})=>{if(n){return t}t.push(o);return this.readChunk(e,t)}))}render(){return t(o,{key:"09d693158ce9480c000957afe31566d47f6fb5f2"},t("sp-theme",{key:"21f246783a3d5786c1cee8f438e89947ee5f574d",scale:"medium",color:"dark"},t("sp-button",{key:"7ef9c60895da162d3b521ddc7c070ff463e51094",label:"Summarize email","icon-only":true,onClickCapture:this.onClick,class:{"summarize-button":true,stopped:this.state==="stopped",loading:this.state==="loading",playing:this.state==="playing"}},this.state==="stopped"&&t("play-icon",null),this.state==="loading"&&t("loading-icon",null),this.state==="playing"&&t("stop-icon",null)),t("audio",{key:"7481ceeb62b6eb21c627d0e04be0e0e7a9e986ec",ref:e=>this.audioRef=e,autoPlay:true,onPlaying:()=>this.state="playing",onPause:()=>this.state="stopped",onEnded:()=>{this.state="stopped";s(`[nylas-summarize-message-button] Audio ended`)}})))}};k([u({name:"nylas-summarize-message-button",eventToProps:{summarize:async(e,t)=>{const{playAudio:n,updateState:o,abortController:i,message:r}=e.detail;const s=a(r.body||"");await o("loading");try{const e=await t.messages.summarizeText(s);const o=t.messages.textToSpeech(e,i);await n(o)}catch(e){await o("stopped");console.error("Error summarizing message:",e)}}},fireRegisterEvent:true}),x("design:type",Function),x("design:paramtypes",[]),x("design:returntype",void 0)],T.prototype,"render",null);T.style=v;function E(e){if(!window.matchMedia("(prefers-color-scheme: dark)").matches){return e}if(!e){return e}if(e==="transparent"){return"color"}if(e.startsWith("#")){return S(e)}if(e.startsWith("rgb")){return R(e)}if(e.startsWith("hsl")){return A(e)}if(_(e)){return C(e)}return e}function S(e){if(e.length<7){e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]}const t=(255-parseInt(e.slice(1,3),16)).toString(16).padStart(2,"0");const n=(255-parseInt(e.slice(3,5),16)).toString(16).padStart(2,"0");const o=(255-parseInt(e.slice(5,7),16)).toString(16).padStart(2,"0");return`#${t}${n}${o}`}function R(e){const t=e.match(/\d+/g)?.map(Number);if(!t){return e}const[n,o,i]=t;return`rgb(${255-n}, ${255-o}, ${255-i})`}function A(e){const t=e.match(/\d+\.?\d*/g)?.map(Number);if(!t){return e}const[n,o,i]=t;return`hsl(${n}, ${o}%, ${100-i}%)`}function _(e){return/^[a-z]+$/i.test(e)}function C(e){return R(z(e))}function z(e){if(e.toLowerCase()==="red"){return"rgb(255, 0, 0)"}return"rgb(0, 0, 0)"}function L(e){if(e instanceof HTMLStyleElement){let t=e.textContent;if(t){t=t.replaceAll(/@media\s*\(prefers-color-scheme:\s*(dark|light)\)\s*\{([^}]+)\}/g,"");const n=t.matchAll(/border-color:\s*([^;]+)/g);if(n){for(const e of n){const[n,o]=e;const i=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");t=t.replaceAll(i,n.replace(o,E(o)))}}const o=t.matchAll(/border:\s*([^;]+)/g);if(o){for(const e of o){const n=e[0].trim();const o=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");const[i,r,s]=e[1].split(" ");t=t.replaceAll(o,n.replace(s,E(s)))}}const i=t.matchAll(/background-color:\s*([^;]+)/g);if(i){for(const e of i){const[n,o]=e;const i=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");t=t.replaceAll(i,n.replace(o,E(o)));s("backgroundColor",{fullMatch:n,replace:n.replace(o,E(o)),color:o,invertColor:E(o)})}}const r=t.matchAll(/background:\s*([^;]+)/g);if(r){for(const e of r){const n=e[0].trim();const o=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");const[i,r,s]=e[1].split(" ");t=t.replaceAll(o,n.replace(s,E(s)))}}const a=t.matchAll(/color:\s*([^;]+)/g);if(a){for(const e of a){const[n,o]=e;const i=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");t=t.replaceAll(i,n.replace(o,E(o)))}}e.textContent=t}}if(e instanceof HTMLElement){const t=window.getComputedStyle(e);const n=t.color||e.style.color;const o=t.backgroundColor||e.style.backgroundColor;const i=t.borderColor||e.style.borderColor;if(n&&!o){e.style.color=""}else if(n&&o){e.style.color=E(n);e.style.backgroundColor=E(o);s("element",e);s("computedStyle.color",n);s("computedStyle.backgroundColor",o);s("invertColor(color)",E(n));s("invertColor(backgroundColor)",E(o))}else if(!n&&o){e.style.backgroundColor=""}if(i){s("borderColor",i);e.style.borderColor=E(i)}if(e.hasAttribute("bgcolor")){e.removeAttribute("bgcolor")}}}function M(e){L(e);const t=e.querySelectorAll("*");t.forEach((e=>L(e)))}var D={exports:{}};
/*! @license DOMPurify 3.0.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.8/LICENSE */(function(e,t){(function(t,n){e.exports=n()})(d,(function(){const{entries:e,setPrototypeOf:t,isFrozen:n,getPrototypeOf:o,getOwnPropertyDescriptor:i}=Object;let{freeze:r,seal:s,create:a}=Object;let{apply:l,construct:c}=typeof Reflect!=="undefined"&&Reflect;if(!r){r=function e(t){return t}}if(!s){s=function e(t){return t}}if(!l){l=function e(t,n,o){return t.apply(n,o)}}if(!c){c=function e(t,n){return new t(...n)}}const f=k(Array.prototype.forEach);const u=k(Array.prototype.pop);const d=k(Array.prototype.push);const m=k(String.prototype.toLowerCase);const p=k(String.prototype.toString);const h=k(String.prototype.match);const y=k(String.prototype.replace);const g=k(String.prototype.indexOf);const b=k(String.prototype.trim);const w=k(RegExp.prototype.test);const v=x(TypeError);function k(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++){o[i-1]=arguments[i]}return l(e,t,o)}}function x(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++){n[o]=arguments[o]}return c(e,n)}}function T(e,o){let i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:m;if(t){t(e,null)}let r=o.length;while(r--){let t=o[r];if(typeof t==="string"){const e=i(t);if(e!==t){if(!n(o)){o[r]=e}t=e}}e[t]=true}return e}function E(e){for(let t=0;t<e.length;t++){if(i(e,t)===undefined){e[t]=null}}return e}function S(t){const n=a(null);for(const[o,r]of e(t)){if(i(t,o)!==undefined){if(Array.isArray(r)){n[o]=E(r)}else if(r&&typeof r==="object"&&r.constructor===Object){n[o]=S(r)}else{n[o]=r}}}return n}function R(e,t){while(e!==null){const n=i(e,t);if(n){if(n.get){return k(n.get)}if(typeof n.value==="function"){return k(n.value)}}e=o(e)}function n(e){console.warn("fallback value for",e);return null}return n}const A=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]);const _=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]);const C=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]);const z=r(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]);const L=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]);const M=r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]);const D=r(["#text"]);const P=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]);const I=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]);const O=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]);const $=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);const F=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm);const j=s(/<%[\w\W]*|[\w\W]*%>/gm);const B=s(/\${[\w\W]*}/gm);const N=s(/^data-[\-\w.\u00B7-\uFFFF]/);const q=s(/^aria-[\-\w]+$/);const U=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);const H=s(/^(?:\w+script|data):/i);const W=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);const X=s(/^html$/i);var Y=Object.freeze({__proto__:null,MUSTACHE_EXPR:F,ERB_EXPR:j,TMPLIT_EXPR:B,DATA_ATTR:N,ARIA_ATTR:q,IS_ALLOWED_URI:U,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:W,DOCTYPE_NAME:X});const G=function e(){return typeof window==="undefined"?null:window};const Z=function e(t,n){if(typeof t!=="object"||typeof t.createPolicy!=="function"){return null}let o=null;const i="data-tt-policy-suffix";if(n&&n.hasAttribute(i)){o=n.getAttribute(i)}const r="dompurify"+(o?"#"+o:"");try{return t.createPolicy(r,{createHTML(e){return e},createScriptURL(e){return e}})}catch(e){console.warn("TrustedTypes policy "+r+" could not be created.");return null}};function V(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:G();const n=e=>V(e);n.version="3.0.8";n.removed=[];if(!t||!t.document||t.document.nodeType!==9){n.isSupported=false;return n}let{document:o}=t;const i=o;const s=i.currentScript;const{DocumentFragment:l,HTMLTemplateElement:c,Node:k,Element:x,NodeFilter:E,NamedNodeMap:F=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:j,DOMParser:B,trustedTypes:N}=t;const q=x.prototype;const H=R(q,"cloneNode");const W=R(q,"nextSibling");const J=R(q,"childNodes");const K=R(q,"parentNode");if(typeof c==="function"){const e=o.createElement("template");if(e.content&&e.content.ownerDocument){o=e.content.ownerDocument}}let Q;let ee="";const{implementation:te,createNodeIterator:ne,createDocumentFragment:oe,getElementsByTagName:ie}=o;const{importNode:re}=i;let se={};n.isSupported=typeof e==="function"&&typeof K==="function"&&te&&te.createHTMLDocument!==undefined;const{MUSTACHE_EXPR:ae,ERB_EXPR:le,TMPLIT_EXPR:ce,DATA_ATTR:fe,ARIA_ATTR:ue,IS_SCRIPT_OR_DATA:de,ATTR_WHITESPACE:me}=Y;let{IS_ALLOWED_URI:pe}=Y;let he=null;const ye=T({},[...A,..._,...C,...L,...D]);let ge=null;const be=T({},[...P,...I,...O,...$]);let we=Object.seal(a(null,{tagNameCheck:{writable:true,configurable:false,enumerable:true,value:null},attributeNameCheck:{writable:true,configurable:false,enumerable:true,value:null},allowCustomizedBuiltInElements:{writable:true,configurable:false,enumerable:true,value:false}}));let ve=null;let ke=null;let xe=true;let Te=true;let Ee=false;let Se=true;let Re=false;let Ae=false;let _e=false;let Ce=false;let ze=false;let Le=false;let Me=false;let De=true;let Pe=false;const Ie="user-content-";let Oe=true;let $e=false;let Fe={};let je=null;const Be=T({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ne=null;const qe=T({},["audio","video","img","source","image","track"]);let Ue=null;const He=T({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]);const We="http://www.w3.org/1998/Math/MathML";const Xe="http://www.w3.org/2000/svg";const Ye="http://www.w3.org/1999/xhtml";let Ge=Ye;let Ze=false;let Ve=null;const Je=T({},[We,Xe,Ye],p);let Ke=null;const Qe=["application/xhtml+xml","text/html"];const et="text/html";let tt=null;let nt=null;const ot=o.createElement("form");const it=function e(t){return t instanceof RegExp||t instanceof Function};const rt=function e(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(nt&&nt===t){return}if(!t||typeof t!=="object"){t={}}t=S(t);Ke=Qe.indexOf(t.PARSER_MEDIA_TYPE)===-1?et:t.PARSER_MEDIA_TYPE;tt=Ke==="application/xhtml+xml"?p:m;he="ALLOWED_TAGS"in t?T({},t.ALLOWED_TAGS,tt):ye;ge="ALLOWED_ATTR"in t?T({},t.ALLOWED_ATTR,tt):be;Ve="ALLOWED_NAMESPACES"in t?T({},t.ALLOWED_NAMESPACES,p):Je;Ue="ADD_URI_SAFE_ATTR"in t?T(S(He),t.ADD_URI_SAFE_ATTR,tt):He;Ne="ADD_DATA_URI_TAGS"in t?T(S(qe),t.ADD_DATA_URI_TAGS,tt):qe;je="FORBID_CONTENTS"in t?T({},t.FORBID_CONTENTS,tt):Be;ve="FORBID_TAGS"in t?T({},t.FORBID_TAGS,tt):{};ke="FORBID_ATTR"in t?T({},t.FORBID_ATTR,tt):{};Fe="USE_PROFILES"in t?t.USE_PROFILES:false;xe=t.ALLOW_ARIA_ATTR!==false;Te=t.ALLOW_DATA_ATTR!==false;Ee=t.ALLOW_UNKNOWN_PROTOCOLS||false;Se=t.ALLOW_SELF_CLOSE_IN_ATTR!==false;Re=t.SAFE_FOR_TEMPLATES||false;Ae=t.WHOLE_DOCUMENT||false;ze=t.RETURN_DOM||false;Le=t.RETURN_DOM_FRAGMENT||false;Me=t.RETURN_TRUSTED_TYPE||false;Ce=t.FORCE_BODY||false;De=t.SANITIZE_DOM!==false;Pe=t.SANITIZE_NAMED_PROPS||false;Oe=t.KEEP_CONTENT!==false;$e=t.IN_PLACE||false;pe=t.ALLOWED_URI_REGEXP||U;Ge=t.NAMESPACE||Ye;we=t.CUSTOM_ELEMENT_HANDLING||{};if(t.CUSTOM_ELEMENT_HANDLING&&it(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)){we.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck}if(t.CUSTOM_ELEMENT_HANDLING&&it(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)){we.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck}if(t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==="boolean"){we.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements}if(Re){Te=false}if(Le){ze=true}if(Fe){he=T({},D);ge=[];if(Fe.html===true){T(he,A);T(ge,P)}if(Fe.svg===true){T(he,_);T(ge,I);T(ge,$)}if(Fe.svgFilters===true){T(he,C);T(ge,I);T(ge,$)}if(Fe.mathMl===true){T(he,L);T(ge,O);T(ge,$)}}if(t.ADD_TAGS){if(he===ye){he=S(he)}T(he,t.ADD_TAGS,tt)}if(t.ADD_ATTR){if(ge===be){ge=S(ge)}T(ge,t.ADD_ATTR,tt)}if(t.ADD_URI_SAFE_ATTR){T(Ue,t.ADD_URI_SAFE_ATTR,tt)}if(t.FORBID_CONTENTS){if(je===Be){je=S(je)}T(je,t.FORBID_CONTENTS,tt)}if(Oe){he["#text"]=true}if(Ae){T(he,["html","head","body"])}if(he.table){T(he,["tbody"]);delete ve.tbody}if(t.TRUSTED_TYPES_POLICY){if(typeof t.TRUSTED_TYPES_POLICY.createHTML!=="function"){throw v('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.')}if(typeof t.TRUSTED_TYPES_POLICY.createScriptURL!=="function"){throw v('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.')}Q=t.TRUSTED_TYPES_POLICY;ee=Q.createHTML("")}else{if(Q===undefined){Q=Z(N,s)}if(Q!==null&&typeof ee==="string"){ee=Q.createHTML("")}}if(r){r(t)}nt=t};const st=T({},["mi","mo","mn","ms","mtext"]);const at=T({},["foreignobject","desc","title","annotation-xml"]);const lt=T({},["title","style","font","a","script"]);const ct=T({},[..._,...C,...z]);const ft=T({},[...L,...M]);const ut=function e(t){let n=K(t);if(!n||!n.tagName){n={namespaceURI:Ge,tagName:"template"}}const o=m(t.tagName);const i=m(n.tagName);if(!Ve[t.namespaceURI]){return false}if(t.namespaceURI===Xe){if(n.namespaceURI===Ye){return o==="svg"}if(n.namespaceURI===We){return o==="svg"&&(i==="annotation-xml"||st[i])}return Boolean(ct[o])}if(t.namespaceURI===We){if(n.namespaceURI===Ye){return o==="math"}if(n.namespaceURI===Xe){return o==="math"&&at[i]}return Boolean(ft[o])}if(t.namespaceURI===Ye){if(n.namespaceURI===Xe&&!at[i]){return false}if(n.namespaceURI===We&&!st[i]){return false}return!ft[o]&&(lt[o]||!ct[o])}if(Ke==="application/xhtml+xml"&&Ve[t.namespaceURI]){return true}return false};const dt=function e(t){d(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}};const mt=function e(t,o){try{d(n.removed,{attribute:o.getAttributeNode(t),from:o})}catch(e){d(n.removed,{attribute:null,from:o})}o.removeAttribute(t);if(t==="is"&&!ge[t]){if(ze||Le){try{dt(o)}catch(e){}}else{try{o.setAttribute(t,"")}catch(e){}}}};const pt=function e(t){let n=null;let i=null;if(Ce){t="<remove></remove>"+t}else{const e=h(t,/^[\r\n\t ]+/);i=e&&e[0]}if(Ke==="application/xhtml+xml"&&Ge===Ye){t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>"}const r=Q?Q.createHTML(t):t;if(Ge===Ye){try{n=(new B).parseFromString(r,Ke)}catch(e){}}if(!n||!n.documentElement){n=te.createDocument(Ge,"template",null);try{n.documentElement.innerHTML=Ze?ee:r}catch(e){}}const s=n.body||n.documentElement;if(t&&i){s.insertBefore(o.createTextNode(i),s.childNodes[0]||null)}if(Ge===Ye){return ie.call(n,Ae?"html":"body")[0]}return Ae?n.documentElement:s};const ht=function e(t){return ne.call(t.ownerDocument||t,t,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,null)};const yt=function e(t){return t instanceof j&&(typeof t.nodeName!=="string"||typeof t.textContent!=="string"||typeof t.removeChild!=="function"||!(t.attributes instanceof F)||typeof t.removeAttribute!=="function"||typeof t.setAttribute!=="function"||typeof t.namespaceURI!=="string"||typeof t.insertBefore!=="function"||typeof t.hasChildNodes!=="function")};const gt=function e(t){return typeof k==="function"&&t instanceof k};const bt=function e(t,o,i){if(!se[t]){return}f(se[t],(e=>{e.call(n,o,i,nt)}))};const wt=function e(t){let o=null;bt("beforeSanitizeElements",t,null);if(yt(t)){dt(t);return true}const i=tt(t.nodeName);bt("uponSanitizeElement",t,{tagName:i,allowedTags:he});if(t.hasChildNodes()&&!gt(t.firstElementChild)&&w(/<[/\w]/g,t.innerHTML)&&w(/<[/\w]/g,t.textContent)){dt(t);return true}if(!he[i]||ve[i]){if(!ve[i]&&kt(i)){if(we.tagNameCheck instanceof RegExp&&w(we.tagNameCheck,i)){return false}if(we.tagNameCheck instanceof Function&&we.tagNameCheck(i)){return false}}if(Oe&&!je[i]){const e=K(t)||t.parentNode;const n=J(t)||t.childNodes;if(n&&e){const o=n.length;for(let i=o-1;i>=0;--i){e.insertBefore(H(n[i],true),W(t))}}}dt(t);return true}if(t instanceof x&&!ut(t)){dt(t);return true}if((i==="noscript"||i==="noembed"||i==="noframes")&&w(/<\/no(script|embed|frames)/i,t.innerHTML)){dt(t);return true}if(Re&&t.nodeType===3){o=t.textContent;f([ae,le,ce],(e=>{o=y(o,e," ")}));if(t.textContent!==o){d(n.removed,{element:t.cloneNode()});t.textContent=o}}bt("afterSanitizeElements",t,null);return false};const vt=function e(t,n,i){if(De&&(n==="id"||n==="name")&&(i in o||i in ot)){return false}if(Te&&!ke[n]&&w(fe,n));else if(xe&&w(ue,n));else if(!ge[n]||ke[n]){if(kt(t)&&(we.tagNameCheck instanceof RegExp&&w(we.tagNameCheck,t)||we.tagNameCheck instanceof Function&&we.tagNameCheck(t))&&(we.attributeNameCheck instanceof RegExp&&w(we.attributeNameCheck,n)||we.attributeNameCheck instanceof Function&&we.attributeNameCheck(n))||n==="is"&&we.allowCustomizedBuiltInElements&&(we.tagNameCheck instanceof RegExp&&w(we.tagNameCheck,i)||we.tagNameCheck instanceof Function&&we.tagNameCheck(i)));else{return false}}else if(Ue[n]);else if(w(pe,y(i,me,"")));else if((n==="src"||n==="xlink:href"||n==="href")&&t!=="script"&&g(i,"data:")===0&&Ne[t]);else if(Ee&&!w(de,y(i,me,"")));else if(i){return false}else;return true};const kt=function e(t){return t.indexOf("-")>0};const xt=function e(t){bt("beforeSanitizeAttributes",t,null);const{attributes:o}=t;if(!o){return}const i={attrName:"",attrValue:"",keepAttr:true,allowedAttributes:ge};let r=o.length;while(r--){const e=o[r];const{name:s,namespaceURI:a,value:l}=e;const c=tt(s);let d=s==="value"?l:b(l);i.attrName=c;i.attrValue=d;i.keepAttr=true;i.forceKeepAttr=undefined;bt("uponSanitizeAttribute",t,i);d=i.attrValue;if(i.forceKeepAttr){continue}mt(s,t);if(!i.keepAttr){continue}if(!Se&&w(/\/>/i,d)){mt(s,t);continue}if(Re){f([ae,le,ce],(e=>{d=y(d,e," ")}))}const m=tt(t.nodeName);if(!vt(m,c,d)){continue}if(Pe&&(c==="id"||c==="name")){mt(s,t);d=Ie+d}if(Q&&typeof N==="object"&&typeof N.getAttributeType==="function"){if(a);else{switch(N.getAttributeType(m,c)){case"TrustedHTML":{d=Q.createHTML(d);break}case"TrustedScriptURL":{d=Q.createScriptURL(d);break}}}}try{if(a){t.setAttributeNS(a,s,d)}else{t.setAttribute(s,d)}u(n.removed)}catch(e){}}bt("afterSanitizeAttributes",t,null)};const Tt=function e(t){let n=null;const o=ht(t);bt("beforeSanitizeShadowDOM",t,null);while(n=o.nextNode()){bt("uponSanitizeShadowNode",n,null);if(wt(n)){continue}if(n.content instanceof l){e(n.content)}xt(n)}bt("afterSanitizeShadowDOM",t,null)};n.sanitize=function(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let o=null;let r=null;let s=null;let a=null;Ze=!e;if(Ze){e="\x3c!--\x3e"}if(typeof e!=="string"&&!gt(e)){if(typeof e.toString==="function"){e=e.toString();if(typeof e!=="string"){throw v("dirty is not a string, aborting")}}else{throw v("toString is not a function")}}if(!n.isSupported){return e}if(!_e){rt(t)}n.removed=[];if(typeof e==="string"){$e=false}if($e){if(e.nodeName){const t=tt(e.nodeName);if(!he[t]||ve[t]){throw v("root node is forbidden and cannot be sanitized in-place")}}}else if(e instanceof k){o=pt("\x3c!----\x3e");r=o.ownerDocument.importNode(e,true);if(r.nodeType===1&&r.nodeName==="BODY"){o=r}else if(r.nodeName==="HTML"){o=r}else{o.appendChild(r)}}else{if(!ze&&!Re&&!Ae&&e.indexOf("<")===-1){return Q&&Me?Q.createHTML(e):e}o=pt(e);if(!o){return ze?null:Me?ee:""}}if(o&&Ce){dt(o.firstChild)}const c=ht($e?e:o);while(s=c.nextNode()){if(wt(s)){continue}if(s.content instanceof l){Tt(s.content)}xt(s)}if($e){return e}if(ze){if(Le){a=oe.call(o.ownerDocument);while(o.firstChild){a.appendChild(o.firstChild)}}else{a=o}if(ge.shadowroot||ge.shadowrootmode){a=re.call(i,a,true)}return a}let u=Ae?o.outerHTML:o.innerHTML;if(Ae&&he["!doctype"]&&o.ownerDocument&&o.ownerDocument.doctype&&o.ownerDocument.doctype.name&&w(X,o.ownerDocument.doctype.name)){u="<!DOCTYPE "+o.ownerDocument.doctype.name+">\n"+u}if(Re){f([ae,le,ce],(e=>{u=y(u,e," ")}))}return Q&&Me?Q.createHTML(u):u};n.setConfig=function(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};rt(e);_e=true};n.clearConfig=function(){nt=null;_e=false};n.isValidAttribute=function(e,t,n){if(!nt){rt({})}const o=tt(e);const i=tt(t);return vt(o,i,n)};n.addHook=function(e,t){if(typeof t!=="function"){return}se[e]=se[e]||[];d(se[e],t)};n.removeHook=function(e){if(se[e]){return u(se[e])}};n.removeHooks=function(e){if(se[e]){se[e]=[]}};n.removeAllHooks=function(){se={}};return n}var J=V();return J}))})(D);const P=D.exports;const I=":host{display:inline-grid;overflow:hidden;width:100%}.view-email{width:100%}.view-email div.gmail_quote{display:none;color:var(--nylas-color-primary-400)}.view-email div.gmail_quote.show{display:block}.view-email blockquote{border-color:var(--nylas-color-primary-500) !important}.view-email .nylas-view-email-toggle-button{display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--nylas-color-primary-200);color:var(--nylas-color-primary-600);border:0;border-radius:2px;font-size:14px;font-weight:500;line-height:1.5;transition:all 0.2s ease-in-out}.view-email .nylas-view-email-toggle-button:hover{background-color:var(--nylas-color-primary-200);color:var(--nylas-color-primary-600)}";const O=I;P.addHook("afterSanitizeAttributes",(function(e){if("target"in e){e.setAttribute("target","_blank");e.setAttribute("rel","noopener")}}));const $=class{constructor(t){e(this,t);this.htmlElement=document.createElement("html");this.setBody=e=>{this.state="loading";this.styles=[];this.hoistedFontURLs=new Map;this.sanitizedBody="";document.querySelectorAll(".nylas-view-email-font").forEach((e=>{e.remove()}));const t=this.message?l(this.message):c(e);if(!t){e=`<html><body>${f(e)}</body></html>`}this.htmlElement.innerHTML=e;if(this.detectDarkMode){M(this.htmlElement)}this.htmlElement.querySelectorAll("link").forEach((e=>{console.debug(`[nylas-view-email] Hoisting link: ${e.getAttribute("href")}`);if(e.getAttribute("rel")==="stylesheet"&&e.getAttribute("href")){const t=e.getAttribute("href");if(t){const e=new URL(t,window.location.href);if(e.protocol==="https:"||e.protocol==="http:"){this.hoistedFontURLs.set(e.href,e.href)}}}}));this.htmlElement.querySelectorAll("style").forEach((e=>{e.innerHTML.split("\n").forEach((e=>{const t=e.match(/@import url\((.*)\)/);if(t){const e=new URL(t[1],window.location.href);if(e.protocol==="https:"||e.protocol==="http:"){this.hoistedFontURLs.set(e.href,e.href)}}}));e.innerHTML=e.innerHTML.replace("body",":host");this.styles.push(e);e.remove()}));this.htmlElement.querySelectorAll("a").forEach((e=>{e.setAttribute("target","_blank")}));const n=this.htmlElement.querySelector(".gmail_quote");if(n){const e=document.createElement("button");e.classList.add("nylas-view-email-toggle-button");e.setAttribute("aria-label","Show quoted text");e.innerText="...";n.parentElement?.insertBefore(e,n)}this.sanitizedBody=P.sanitize(this.htmlElement.innerHTML);this.hoistedFontURLs.forEach(((e,t)=>{const n=document.createElement("link");n.setAttribute("rel","stylesheet");n.setAttribute("href",e);n.classList.add("nylas-view-email-font");document.head.appendChild(n)}));this.state="ready"};this.handleMobileSize=()=>{const e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);if(e<=768){const t=this.viewEmailElement?.getBoundingClientRect();if(t&&this.viewEmailElement&&this.parent){if(t.width>e){const e=this.parent;const n=e?.getBoundingClientRect();s("Parent width:",n?.width,"Parent height:",n?.height);s("Parent client width:",e.clientWidth,"Parent client height:",e.clientHeight);const o=n.width/t.width;const i=n.height/t.height;const r=Math.min(o,i);s("Scale:",r);this.viewEmailElement.style.setProperty("transform",`scale(${r})`);this.viewEmailElement.style.setProperty("transform-origin",`top left`);this.viewEmailElement.style.setProperty("height",`${t.height*r}px`)}}}else{this.viewEmailElement?.style.removeProperty("transform");this.viewEmailElement?.style.removeProperty("transform-origin");this.viewEmailElement?.style.removeProperty("height")}};this.message=undefined;this.parent=undefined;this.attachments=[];this.detectDarkMode=true;this.state="loading";this.sanitizedBody="";this.styles=[];this.viewEmailElement=undefined;this.hoistedFontURLs=new Map}connectedCallback(){}disconnectedCallback(){s(`[nylas-view-email] Component disconnected`);this.state="loading";this.styles=[];this.hoistedFontURLs=new Map;this.sanitizedBody="";document.querySelectorAll(".nylas-view-email-font").forEach((e=>{e.remove()}))}async componentWillLoad(){s(`[nylas-view-email] component loaded`);this.setBody(this.message?.body??"")}async componentDidLoad(){s(`[nylas-view-thread] Component did load`);this.handleMobileSize()}async messageChanged(){s(`[nylas-view-thread] Message changed`,{message:this.message});this.setBody(this.message?.body??"")}handleScroll(){this.handleMobileSize()}viewEmailElementChanged(){const e=this.viewEmailElement?.querySelectorAll(".nylas-view-email-toggle-button");if(e){e.forEach((e=>{e.addEventListener("click",(()=>{const e=this.viewEmailElement?.querySelector(".gmail_quote");if(e){e.classList.toggle("show")}}))}))}}render(){console.debug(`[nylas-view-email] render`,{hoistedFontURLs:this.hoistedFontURLs});return t(o,{key:"fe606c06674789e63156056d8b71a5cb2202cf47"},this.state==="loading"&&t("div",null,"Loading..."),this.state==="ready"&&t(r,null,this.styles.map((e=>t("style",null,P.sanitize(e.innerHTML)))),t("div",{class:"view-email",part:"view-email",innerHTML:this.sanitizedBody,ref:e=>this.viewEmailElement=e})))}get host(){return i(this)}static get watchers(){return{message:["messageChanged"],viewEmailElement:["viewEmailElementChanged"]}}};$.style=O;const F=".sc-reply-all-icon-h{display:flex}";const j=F;const B=class{constructor(t){e(this,t);this.width="15";this.height="15"}render(){return t("svg",{key:"2baf5fdfb4309e039a9a4e66ecacbf4481c2d7ca",fill:"auto",width:this.width,height:this.height,viewBox:"0 0 1920 1920",xmlns:"http://www.w3.org/2000/svg"},t("path",{key:"d7f1586f9af096cb3a1876b681ba408387899788",d:"m1030.975 188 81.249 81.249-429.228 429.228h300.747c516.223 0 936.257 420.034 936.257 936.257v98.028h-114.92v-98.028c0-452.901-368.436-821.337-821.337-821.337H682.996l429.228 429.229-81.25 81.248-567.936-567.937L1030.975 188Zm-463.038.011 81.249 81.25-486.688 486.688 486.688 486.688-81.249 81.249L0 755.949 567.937 188.01Z","fill-rule":"evenodd"}))}};B.style=j;const N=".sc-reply-icon-h{display:flex}";const q=N;const U=class{constructor(t){e(this,t);this.width="15";this.height="15"}render(){return t("svg",{key:"07034b975afd3fa950dec8be4e28c16775b5a49e",fill:"auto",width:this.width,height:this.height,viewBox:"0 0 1920 1920",xmlns:"http://www.w3.org/2000/svg"},t("path",{key:"5601b12fa1dde6412985fa2f701eeb3f9e2b07b4",d:"M835.942 632.563H244.966l478.08-478.08-90.496-90.496L-.026 696.563 632.55 1329.14l90.496-90.496-478.08-478.08h590.976c504.448 0 914.816 410.368 914.816 914.816v109.184h128V1675.38c0-574.976-467.84-1042.816-1042.816-1042.816","fill-rule":"evenodd"}))}};U.style=q;export{h as forward_icon,b as nylas_composer,T as nylas_summarize_message_button,$ as nylas_view_email,B as reply_all_icon,U as reply_icon};
//# sourceMappingURL=p-44a0f658.entry.js.map