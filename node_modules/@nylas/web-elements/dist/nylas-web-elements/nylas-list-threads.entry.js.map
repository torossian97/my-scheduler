{"file":"nylas-list-threads.entry.esm.js","mappings":"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","names":[],"sources":["src/components/mailbox/nylas-list-threads/nylas-list-threads.scss?tag=nylas-list-threads&encapsulation=shadow","src/components/mailbox/nylas-list-threads/nylas-list-threads.tsx"],"sourcesContent":[":host {\n  display: block;\n  font-size: var(--nylas-font-size, inherit);\n  font-family: var(--nylas-font-family, inherit);\n}\n\n.list-thread {\n  display: grid;\n  grid-auto-flow: row;\n  color: var(--nylas-color-primary-800);\n  width: 100%;\n}\n\n.thread {\n  position: relative;\n  width: 100%;\n  display: grid;\n  padding: 0.5rem 1rem;\n  column-gap: 0.25rem;\n  grid-template-areas:\n    '........ from    count   ....... date actions'\n    'checkbox subject subject subject subject actions'\n    '........ snippet snippet snippet snippet actions';\n  grid-template-columns: auto auto auto auto auto auto;\n  margin-bottom: 0.75rem;\n  border-radius: var(--nylas-border-radius-2x);\n  color: var(--nylas-color-primary-00);\n  background-color: var(--nylas-color-primary-50);\n  border: 0;\n  box-sizing: border-box;\n  text-align: left;\n  cursor: pointer;\n  box-shadow: 1px 1px 3px 0px rgb(0 0 0 / 30%);\n\n  font-size: inherit;\n  font-family: inherit;\n\n  &.loading {\n    animation: pulsate 1.5s infinite ease-in-out;\n    width: 100%;\n    height: 90px;\n  }\n\n  &:last-of-type {\n    margin-bottom: 0;\n  }\n\n  &.selected {\n    box-shadow: 0 2px 0 0 var(--nylas-color-primary-200);\n    background-color: var(--nylas-color-primary-100);\n  }\n\n  &:hover {\n    box-shadow: 0 2px 0 0 var(--nylas-color-primary-200);\n    background-color: var(--nylas-color-primary-100);\n  }\n\n  > div {\n    align-self: center;\n    pointer-events: all !important;\n  }\n\n  .actions {\n    grid-area: actions;\n  }\n\n  .actions sp-action-menu {\n    pointer-events: initial !important;\n  }\n\n  .actions sp-action-button {\n    pointer-events: initial !important;\n  }\n\n  .actions sp-menu-item {\n    pointer-events: initial !important;\n  }\n\n  .checkbox {\n    grid-area: checkbox;\n    margin-right: 0.5rem;\n    pointer-events: initial !important;\n    sp-checkbox {\n      pointer-events: initial !important;\n    }\n  }\n\n  .star {\n    grid-area: star;\n    justify-self: end;\n  }\n\n  .from {\n    grid-area: from;\n    color: var(--nylas-color-primary-600);\n  }\n\n  .count {\n    grid-area: count;\n    color: var(--nylas-color-primary-600);\n  }\n\n  .subject {\n    grid-area: subject;\n    color: var(--nylas-color-primary-600);\n  }\n\n  .snippet {\n    grid-area: snippet;\n    color: var(--nylas-color-primary-500);\n  }\n\n  .date {\n    grid-area: date;\n    align-self: center;\n    color: var(--nylas-color-primary-500);\n  }\n\n  &.unread {\n    .from,\n    .count,\n    .subject,\n    .date {\n      font-weight: 600;\n      color: var(--nylas-color-primary-800);\n    }\n\n    .snippet {\n      color: var(--nylas-color-primary-700);\n    }\n  }\n\n  .from {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  .snippet {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  .subject {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n}\n\n/* Extra small devices (phones, 600px and down) */\n@media only screen and (max-width: 600px) {\n}\n\n/* Small devices (portrait tablets and large phones, 600px and up) */\n@media only screen and (min-width: 600px) {\n}\n\n/* Medium devices (landscape tablets, 768px and up) */\n@media only screen and (min-width: 768px) {\n  .thread {\n    column-gap: 1rem;\n    grid-template-areas: 'checkbox from count subject snippet date actions';\n    grid-template-columns: auto minmax(auto, 200px) auto auto 1fr auto auto;\n    margin-bottom: 0.5rem;\n    border: 1px solid var(--nylas-color-primary-100);\n\n    &.no-checkbox {\n      grid-template-areas: 'from count subject snippet date actions';\n      grid-template-columns: minmax(auto, 200px) auto auto 1fr auto auto;\n    }\n\n    .checkbox {\n      margin-right: 0;\n    }\n  }\n}\n\n@keyframes pulsate {\n  0% {\n    background-color: var(--nylas-color-primary-50);\n  }\n  50% {\n    background-color: var(--nylas-color-primary-100);\n  }\n  100% {\n    background-color: var(--nylas-color-primary-50);\n  }\n}\n\n/* Large devices (laptops/desktops, 992px and up) */\n@media only screen and (min-width: 992px) {\n}\n\n/* Extra large devices (large laptops and desktops, 1200px and up) */\n@media only screen and (min-width: 1200px) {\n}\n","import { RegisterComponent } from '@/common/register-component';\nimport { DataState } from '@/common/types';\nimport { debug, formatDateTime, formatParticipants } from '@/utils/utils';\nimport { Thread } from '@nylas/core';\nimport { TokenInfo } from '@nylas/core/dist/auth';\nimport { Component, Event, EventEmitter, Host, Prop, h } from '@stencil/core';\nimport { NylasMailboxConnector } from '../../..';\nimport { NylasMailbox } from '../nylas-mailbox/nylas-mailbox';\n\n@Component({\n  tag: 'nylas-list-threads',\n  styleUrl: 'nylas-list-threads.scss',\n  shadow: true,\n})\nexport class NylasListThreads {\n  @Prop() readonly threads: Thread[] = [];\n  @Prop() readonly isAuthenticated: boolean = false;\n  @Prop() readonly tokenInfo?: TokenInfo;\n  @Prop() readonly state: DataState = 'ready';\n  @Prop() readonly showCheckbox: boolean = false;\n  @Event({ cancelable: true }) readonly threadSelected!: EventEmitter<Thread>;\n\n  connectedCallback() {}\n\n  disconnectedCallback() {}\n\n  async componentWillLoad() {\n    debug(`[nylas-list-threads] Component will load`);\n  }\n\n  async componentDidLoad() {\n    debug(`[nylas-list-threads] Component did load`, { isAuthenticated: this.isAuthenticated });\n  }\n\n  /**\n   * Handle thread selected\n   * @param thread The thread that was selected\n   * @returns void\n   * @emits threadSelected\n   */\n  private handleThreadSelected = async (thread: Thread) => {\n    debug(`[nylas-list-threads] Thread selected`, { thread });\n    const event = this.threadSelected.emit(thread);\n    if (!event.defaultPrevented) {\n      debug(`[nylas-list-threads] Default event not prevented, selecting thread`);\n    }\n  };\n\n  /**\n   * Handle checkbox click\n   * @param event The click event\n   * @returns void\n   */\n  private handleCheckboxClick = async (event: Event) => {\n    debug(`[nylas-list-threads] Checkbox clicked`, { event });\n    event.stopPropagation();\n  };\n\n  @RegisterComponent<NylasListThreads, NylasMailboxConnector, Exclude<NylasMailbox['stores'], undefined>>({\n    name: 'nylas-list-threads',\n    stateToProps: new Map([\n      ['auth.isAuthenticated', 'isAuthenticated'],\n      ['auth.tokenInfo', 'tokenInfo'],\n      ['mailbox.threads', 'threads'],\n      ['mailbox.state', 'state'],\n    ]),\n    eventToProps: {\n      threadSelected: async (event: CustomEvent<Thread>, nylasConnector: NylasMailboxConnector) => {\n        debug(`[nylas-list-threads] Thread selected`, { event });\n        await nylasConnector.threads.selectThread(event.detail);\n      },\n    },\n    fireRegisterEvent: true,\n  })\n  render() {\n    return (\n      <Host>\n        <div class={'list-thread'} part=\"list-thread\">\n          {this.state === 'loading' && new Array(10).fill(0).map((_, i) => <div class=\"thread loading\" style={{ animationDelay: `${i * 20}ms` }} />)}\n          {this.state === 'ready' &&\n            this.threads.map(thread => (\n              <button\n                key={thread?.id}\n                class={{\n                  'thread': true,\n                  'unread': thread?.unread === true,\n                  'no-checkbox': this.showCheckbox === false,\n                }}\n                part=\"thread\"\n                aria-label={`Thread with subject ${thread?.subject}`}\n                onClick={() => this.handleThreadSelected(thread)}\n              >\n                {this.showCheckbox && (\n                  <div class=\"checkbox\" part=\"checkbox\">\n                    <sp-checkbox size=\"s\" value={thread?.id} onClick={this.handleCheckboxClick} />\n                  </div>\n                )}\n                <div class=\"from\" part=\"from\">\n                  {formatParticipants(thread.participants ?? [], this.tokenInfo?.email, thread?.message_ids?.length || 1, 1)}\n                </div>\n                <div class=\"subject\" part=\"subject\">\n                  {thread?.subject}\n                </div>\n                <div class=\"count\" part=\"count\">\n                  {thread?.message_ids?.length || 1}\n                </div>\n                <div class=\"snippet\" part=\"snippet\">\n                  {thread?.snippet?.trim()}\n                </div>\n                {thread.latest_message_received_date && (\n                  <div\n                    class=\"date\"\n                    aria-label={`${Intl.DateTimeFormat(undefined, { dateStyle: 'full' }).format(new Date(thread.latest_message_received_date * 1000))}`}\n                    part=\"date\"\n                  >\n                    {formatDateTime(thread.latest_message_received_date)}\n                  </div>\n                )}\n              </button>\n            ))}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"version":3}