{"file":"nylas-threads-search.entry.js","mappings":";;;;;AAAA,MAAM,qBAAqB,GAAG,oDAAoD;;;;;;;;;;;;;;;;MCWrE,kBAAkB;;;;QAsCrB,aAAQ,GAAG,OAAO,KAAY;YACpC,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,KAAK,CAAC,eAAe,EAAE,CAAC;YAExB,MAAM,MAAM,GAAG,KAAK,CAAC,MAA0B,CAAC;YAChD,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;YAE3B,IAAI,KAAK,KAAK,IAAI,CAAC,aAAa,EAAE;gBAChC,OAAO;aACR;YAED,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SACtC,CAAC;qBA/C+B,EAAE;6BAUF,EAAE;;IAEnC,iBAAiB,MAAK;IAEtB,oBAAoB,MAAK;IAEzB,MAAM,iBAAiB;QACrB,KAAK,CAAC,4CAA4C,CAAC,CAAC;KACrD;IAED,MAAM,gBAAgB;QACpB,KAAK,CAAC,2CAA2C,CAAC,CAAC;KACpD;IAGD,aAAa;QACX,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC;KACjC;IAmCD,MAAM;QACJ,QACE,EAAC,IAAI,uDACH,iEAAU,KAAK,EAAC,QAAQ,EAAC,KAAK,EAAC,MAAM,IACnC,kEAAW,KAAK,QAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,aAAa,GAAc,CAC/F,CACN,EACP;KACH;;;;;AARD;IAbC,iBAAiB,CAAwF;QACxG,IAAI,EAAE,kBAAkB;QACxB,YAAY,EAAE,IAAI,GAAG,CAAC,CAAC,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC,CAAC;QACzD,YAAY,EAAE;YACZ,MAAM,EAAE,OAAO,MAA2B,EAAE,cAAqC;gBAC/E,MAAM,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC;oBACtC,mBAAmB,EAAE,MAAM,CAAC,MAAM,IAAI,SAAS;oBAC/C,UAAU,EAAE,SAAS;iBACtB,CAAC,CAAC;aACJ;SACF;QACD,iBAAiB,EAAE,IAAI;KACxB,CAAC;;;;gDASD;;;;;","names":[],"sources":["src/components/mailbox/nylas-threads-search/nylas-threads-search.scss?tag=nylas-threads-search&encapsulation=shadow","src/components/mailbox/nylas-threads-search/nylas-threads-search.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n\nsp-search {\n  width: 100%;\n  border: 0;\n}\n","import { RegisterComponent } from '@/common/register-component';\nimport { debug } from '@/utils/utils';\nimport { Component, Event, EventEmitter, Host, Prop, State, Watch, h } from '@stencil/core';\nimport { NylasMailboxConnector } from '../../..';\nimport { NylasMailbox } from '../nylas-mailbox/nylas-mailbox';\n\n@Component({\n  tag: 'nylas-threads-search',\n  styleUrl: 'nylas-threads-search.scss',\n  shadow: true,\n})\nexport class NylasThreadsSearch {\n  /**\n   * The query to search for threads\n   */\n  @Prop() readonly query: string = '';\n\n  /**\n   * Event emitted when the query changes\n   */\n  @Event() readonly search!: EventEmitter<string>;\n\n  /**\n   * A copy of the query that is used internally, we can mutate this.\n   */\n  @State() internalQuery: string = '';\n\n  connectedCallback() {}\n\n  disconnectedCallback() {}\n\n  async componentWillLoad() {\n    debug(`[nylas-threads-search] Component will load`);\n  }\n\n  async componentDidLoad() {\n    debug(`[nylas-threads-search] Component did load`);\n  }\n\n  @Watch('query')\n  onQueryChange() {\n    this.internalQuery = this.query;\n  }\n\n  /**\n   * On search event\n   * @param event On blur event\n   * @returns void\n   */\n  private onSearch = async (event: Event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const target = event.target as HTMLInputElement;\n    const value = target.value;\n\n    if (value === this.internalQuery) {\n      return;\n    }\n\n    this.internalQuery = value;\n    this.search.emit(this.internalQuery);\n  };\n\n  @RegisterComponent<NylasThreadsSearch, NylasMailboxConnector, Exclude<NylasMailbox['stores'], undefined>>({\n    name: 'nylas-pagination',\n    stateToProps: new Map([['mailbox.searchQuery', 'query']]),\n    eventToProps: {\n      search: async (_event: CustomEvent<string>, nylasConnector: NylasMailboxConnector) => {\n        await nylasConnector.threads.getThreads({\n          search_query_native: _event.detail || undefined,\n          page_token: undefined,\n        });\n      },\n    },\n    fireRegisterEvent: true,\n  })\n  render() {\n    return (\n      <Host>\n        <sp-theme scale=\"medium\" color=\"dark\">\n          <sp-search quiet onSubmit={this.onSearch} onBlur={this.onSearch} value={this.internalQuery}></sp-search>\n        </sp-theme>\n      </Host>\n    );\n  }\n}\n"],"version":3}