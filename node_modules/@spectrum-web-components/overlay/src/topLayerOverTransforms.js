"use strict";import{getContainingBlock as h,getWindow as w,isContainingBlock as x}from"@floating-ui/utils/dom";import{VirtualTrigger as k}from"./VirtualTrigger.js";export const topLayerOverTransforms=()=>({name:"topLayer",async fn(g){const{x:s,y:l,elements:{reference:c,floating:o}}=g;let e=!1,f=!1,d=!1;const r={x:0,y:0};try{e=e||o.matches(":popover-open")}catch(a){}try{e=e||o.matches(":open")}catch(a){}try{e=e||o.matches(":modal")}catch(a){}f=e;const p=new Event("floating-ui-dialog-test",{composed:!0,bubbles:!0});o.addEventListener("floating-ui-dialog-test",a=>{a.composedPath().forEach(n=>{if(d=d||n===c,!(n===o||n.localName!=="dialog"))try{e=e||n.matches(":modal")}catch(t){}})},{once:!0}),o.dispatchEvent(p);let m=!1;if(!(c instanceof k)){const a=d?c:o,n=x(a)?a:h(a);let t={};if(n!==null&&w(n)!==n&&(t=getComputedStyle(n),m=t.transform!=="none"||t.translate!=="none"||(t.backdropFilter?t.backdropFilter!=="none":!1)||(t.filter?t.filter!=="none":!1)||t.willChange.search("transform")>-1||t.willChange.search("translate")>-1||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))),e&&m&&n){const i=n.getBoundingClientRect(),{marginInlineStart:y="0",marginBlockStart:u="0"}=t;r.x=i.x+parseFloat(y),r.y=i.y+parseFloat(u)}}return e&&f?{x:s+r.x,y:l+r.y,data:r}:e?{x:s,y:l,data:r}:{x:s-r.x,y:l-r.y,data:r}}});
//# sourceMappingURL=topLayerOverTransforms.js.map
